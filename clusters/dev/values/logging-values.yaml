# Logging Stack Configuration for dev
# Elasticsearch + Fluent Bit + Kibana
# Resource constraints removed - Kubernetes will auto-manage

elasticsearch:
  replicas: 1
  
  # Single-node cluster configuration for dev
  clusterName: "elasticsearch"
  nodeGroup: "master"
  
  # CRITICAL: Set to empty array to prevent chart from setting initial_master_nodes
  masterService: ""
  
  resources: {}
  
  volumeClaimTemplate:
    accessModes: ["ReadWriteOnce"]
    resources:
      requests:
        storage: 10Gi
  
  esJavaOpts: "-Xmx512m -Xms512m"
  
  # For single node, use single-node discovery - override chart defaults
  esConfig:
    elasticsearch.yml: |
      cluster.name: "elasticsearch"
      network.host: 0.0.0.0
      discovery.type: single-node
      xpack.security.enabled: false
  
  # Disable these settings that conflict with single-node
  clusterHealthCheckParams: ""

kibana:
  service:
    type: ClusterIP
    port: 5601
  
  ingress:
    enabled: true
    className: nginx
    hosts:
      - host: kibana.dev.example.com
        paths:
          - path: /
            pathType: Prefix
  
  resources: {}
  
  elasticsearchHosts: "http://elasticsearch-master:9200"

fluent-bit:
  resources: {}
  
  config:
    outputs: |
      [OUTPUT]
          Name es
          Match *
          Host elasticsearch-master
          Port 9200
          Logstash_Format On
          Logstash_Prefix fluentbit
          Retry_Limit False
